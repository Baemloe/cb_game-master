{"ast":null,"code":"import React from\"react\";import TextUnits from\"./TextUnits\";import List from\"./List\";import Input from\"./Input\";import{jsx as _jsx}from\"react/jsx-runtime\";class ListTable extends React.Component{constructor(props){super(props);this.listsArray=new Map();this.createList=this.getList.bind(this);this.state={lArr:[]};}componentDidMount(){this.props.start.up.current.state.set(/*#__PURE__*/_jsx(TextUnits,{textValue:this.props.data.taskText}));this.props.start.control.current.state.mount([{click:this.check.bind(this),text:\"Проверить\"}]);}render(){// Задаем стиль для таблицы\nconst tableStyle={maxWidth:\"800px\",// Максимальная ширина таблицы\nmargin:\"0 auto\",// Автоматические отступы для центрирования\nbackground:\"white\"// Фон для таблицы, если нужно\n};return/*#__PURE__*/_jsx(\"div\",{className:\"TableContainer\",style:{display:'flex',justifyContent:'center',alignItems:'center'},children:/*#__PURE__*/_jsx(\"table\",{className:\"TableWithGradient\",children:/*#__PURE__*/_jsx(\"tbody\",{children:this.props.data.table.map((row,index)=>{return/*#__PURE__*/_jsx(\"tr\",{children:row.map((cell,index_2)=>{return/*#__PURE__*/_jsx(\"td\",{children:cell.includes(\"check\")?this.createList(cell,index+\"_\"+index_2):cell},index+\"_\"+index_2);})},index);})})})});}getList(cell,key){let cellName=cell.split(\"_\");let buff=/*#__PURE__*/React.createRef();let jsx;switch(cellName[1]){case\"list\":jsx=/*#__PURE__*/_jsx(List,{index:cellName[2],listArr:this.props.data.list,ref:buff});break;case\"input\":jsx=/*#__PURE__*/_jsx(Input,{index:cellName[2],listArr:this.props.data.list,ref:buff});break;}if(!this.listsArray.has(key)){this.listsArray.set(key,buff);}return jsx;}check(){let mistakes=0;let points=this.props.data.points||0;// Получаем максимальные баллы из данных\nconst deduction=this.props.data.deduction||2;// Штраф за ошибку из данных\nlet message={text_1:[]};// Проходим по каждому элементу списка и проверяем ответы\nfor(let[key,buff]of this.listsArray){if(buff.current.state.result==null){message.text_1.push(\"Введи все ответы!\");this.props.start.up.current.state.set(/*#__PURE__*/_jsx(TextUnits,{textValue:message}),true,2000);return;// Прекращаем выполнение, если есть незаполненные ответы\n}else if(buff.current.state.result==0){mistakes++;}}// Если две или более ошибки, баллы устанавливаются в 0\nif(mistakes>=2){points=0;}else{// Начисляем баллы на основе количества ошибок\npoints=Math.max(points-mistakes*deduction,0);}message.text_1.push(\"\\u0422\\u044B \\u043D\\u0430\\u0431\\u0440\\u0430\\u043B \".concat(points,\" \\u043E\\u0447\\u043A\\u043E\\u0432!\"));// Обновляем состояние и показываем результат\nthis.props.start.up.current.state.pointsUpdate(points);this.props.start.up.current.state.set(/*#__PURE__*/_jsx(TextUnits,{textValue:message}),true,2000);this.props.start.control.current.state.mount([{click:this.props.start.next,text:\"Дальше\"}]);}}export default ListTable;","map":{"version":3,"names":["React","TextUnits","List","Input","jsx","_jsx","ListTable","Component","constructor","props","listsArray","Map","createList","getList","bind","state","lArr","componentDidMount","start","up","current","set","textValue","data","taskText","control","mount","click","check","text","render","tableStyle","maxWidth","margin","background","className","style","display","justifyContent","alignItems","children","table","map","row","index","cell","index_2","includes","key","cellName","split","buff","createRef","listArr","list","ref","has","mistakes","points","deduction","message","text_1","result","push","Math","max","concat","pointsUpdate","next"],"sources":["/Users/maksimgazdanov/Desktop/Chikanov/cb_game-master/cb_game-master/src/units/Table.js"],"sourcesContent":["import React from \"react\";\nimport TextUnits from \"./TextUnits\";\nimport List from \"./List\";\nimport Input from \"./Input\";\nclass ListTable extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n        this.listsArray = new Map();\n        this.createList = this.getList.bind(this);\n        this.state = \n        {\n            lArr: []\n        }\n    }\n    componentDidMount()\n    {\n        this.props.start.up.current.state.set(<TextUnits textValue={this.props.data.taskText}/>);\n        this.props.start.control.current.state.mount([{click: this.check.bind(this), text: \"Проверить\"}]);\n    }\n    render() {\n        // Задаем стиль для таблицы\n        const tableStyle = {\n          maxWidth: \"800px\", // Максимальная ширина таблицы\n          margin: \"0 auto\", // Автоматические отступы для центрирования\n          background: \"white\", // Фон для таблицы, если нужно\n        };\n\n            return (\n              <div className=\"TableContainer\" style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n                <table className=\"TableWithGradient\">\n                  <tbody>\n                    {this.props.data.table.map((row, index) => {\n                      return (\n                        <tr key={index}>\n                          {row.map((cell, index_2) => {\n                            return (\n                              <td key={index + \"_\" + index_2}>\n                                {cell.includes(\"check\")\n                                  ? this.createList(cell, index + \"_\" + index_2)\n                                  : cell}\n                              </td>\n                            );\n                          })}\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </table>\n              </div>\n            );\n          }\n\n    getList(cell, key)\n    {\n        \n        let cellName = cell.split(\"_\");      \n        let buff = React.createRef();\n        let jsx;\n        switch(cellName[1])\n        {\n            case \"list\":\n                jsx = <List index={cellName[2]} listArr={this.props.data.list} ref={buff}/>\n                break;\n            case \"input\":\n                jsx = <Input index ={cellName[2]} listArr={this.props.data.list} ref={buff}/>;\n                break;\n        }  \n        if(!this.listsArray.has(key))\n        {\n            this.listsArray.set(key, buff);\n        }\n        return jsx;\n    }\n    check() {\n        let mistakes = 0;\n        let points = this.props.data.points || 0; // Получаем максимальные баллы из данных\n        const deduction = this.props.data.deduction || 2; // Штраф за ошибку из данных\n        let message = { text_1: [] };\n\n        // Проходим по каждому элементу списка и проверяем ответы\n        for (let [key, buff] of this.listsArray) {\n            if (buff.current.state.result == null) {\n                message.text_1.push(\"Введи все ответы!\");\n                this.props.start.up.current.state.set(<TextUnits textValue={message} />, true, 2000);\n                return; // Прекращаем выполнение, если есть незаполненные ответы\n            } else if (buff.current.state.result == 0) {\n                mistakes++;\n            }\n        }\n\n        // Если две или более ошибки, баллы устанавливаются в 0\n        if (mistakes >= 2) {\n            points = 0;\n        } else {\n            // Начисляем баллы на основе количества ошибок\n            points = Math.max(points - mistakes * deduction, 0);\n        }\n\n        message.text_1.push(`Ты набрал ${points} очков!`);\n        // Обновляем состояние и показываем результат\n        this.props.start.up.current.state.pointsUpdate(points);\n        this.props.start.up.current.state.set(<TextUnits textValue={message} />, true, 2000);\n        this.props.start.control.current.state.mount([{ click: this.props.start.next, text: \"Дальше\" }]);\n    }\n\n}\nexport default ListTable;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}